From fe8951898741dc2428b8e9268e9f53b599f63178 Mon Sep 17 00:00:00 2001
From: syoder <syoder@imagestream.com>
Date: Mon, 16 Sep 2013 11:08:15 -0500
Subject: [PATCH 08/14] Add 802.11s SAE authentication support in Luci and
 .config

---
 .../luci-mod-admin-full/luasrc/model/cbi/admin_network/wifi.lua  | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

--- a/modules/luci-mod-admin-full/luasrc/model/cbi/admin_network/wifi.lua
+++ b/modules/luci-mod-admin-full/luasrc/model/cbi/admin_network/wifi.lua
@@ -349,6 +349,15 @@ s:tab("advanced", translate("Advanced Se
 
 ssid = s:taboption("general", Value, "ssid", translate("<abbr title=\"Extended Service Set Identifier\">ESSID</abbr>"))
 ssid.datatype = "maxlength(32)"
+ssid:depends({mode="ap"})
+ssid:depends({mode="sta"})
+ssid:depends({mode="adhoc"})
+ssid:depends({mode="ahdemo"})
+ssid:depends({mode="ap-wds"})
+ssid:depends({mode="sta-wds"})
+
+meshid = s:taboption("general", Value, "mesh_id", translate("<abbr title=\"Mesh Identifier\">Mesh ID</abbr>"))
+meshid:depends({mode="mesh"})
 
 mode = s:taboption("general", ListValue, "mode", translate("Mode"))
 mode.override_values = true
@@ -401,7 +410,7 @@ end
 
 if hwtype == "mac80211" then
 	if fs.access("/usr/sbin/iw") then
-		mode:value("mesh", "802.11s")
+		mode:value("mesh", "802.11s Mesh")
 	end
 
 	mode:value("ahdemo", translate("Pseudo Ad-Hoc (ahdemo)"))
@@ -746,7 +755,6 @@ for slot=1,4 do
 	end
 end
 
-
 if hwtype == "mac80211" or hwtype == "prism2" then
 
 	-- Probe 802.11r support (and EAP support as a proxy for Openwrt)
