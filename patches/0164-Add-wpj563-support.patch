Index: build_dir/tools/firmware-utils/src/mkmylofw.c
===================================================================
--- build_dir.orig/tools/firmware-utils/src/mkmylofw.c
+++ build_dir/tools/firmware-utils/src/mkmylofw.c
@@ -167,6 +167,9 @@ struct cpx_board boards[] = {
 	CPX_BOARD_AR71XX(DEVID_COMPEX_WPJ531, 16,
 		"WPJ531", "Compex WPJ531",
 		"BareBoard"),
+	CPX_BOARD_AR71XX(DEVID_COMPEX_WPJ563, 16,
+		"WPJ563", "Compex WPJ563",
+		"BareBoard"),
 
 	CPX_BOARD_AR23XX(DEVID_COMPEX_NP25G, 4,
 		"NP25G", "Compex NetPassage 25G",
Index: build_dir/tools/firmware-utils/src/myloader.h
===================================================================
--- build_dir.orig/tools/firmware-utils/src/myloader.h
+++ build_dir/tools/firmware-utils/src/myloader.h
@@ -66,6 +66,7 @@
 #define DEVID_COMPEX_WPJ344	0x0687
 #define DEVID_COMPEX_WPJ558	0x0691
 #define DEVID_COMPEX_WPJ531	0x0693
+#define DEVID_COMPEX_WPJ563	0x0694
 
 /* Devices based on the IXP422 */
 #define DEVID_COMPEX_WP18	0x047E
Index: build_dir/target/linux/ar71xx/files/arch/mips/ath79/mach-wpj563.c
===================================================================
--- build_dir.orig/target/linux/ar71xx/files/arch/mips/ath79/mach-wpj563.c
+++ build_dir/target/linux/ar71xx/files/arch/mips/ath79/mach-wpj563.c
@@ -27,6 +27,7 @@
 #include "dev-m25p80.h"
 #include "machtypes.h"
 #include "pci.h"
+#include "dev-ap9x-pci.h"
 #include "dev-eth.h"
 #include "dev-gpio-buttons.h"
 #include "dev-leds-gpio.h"
@@ -50,27 +51,27 @@
 
 static struct gpio_led WPJ563_leds_gpio[] __initdata = {
 	{
-		.name		= "wpj563:green:sig1",
+		.name		= "wpj344:green:sig1",
 		.gpio		= WPJ563_GPIO_LED_SIG1,
 		.active_low	= 1,
 	},
 	{
-		.name		= "wpj563:green:sig2",
+		.name		= "wpj344:green:sig2",
 		.gpio		= WPJ563_GPIO_LED_SIG2,
 		.active_low	= 1,
 	},
 	{
-		.name		= "wpj563:green:sig3",
+		.name		= "wpj344:green:sig3",
 		.gpio		= WPJ563_GPIO_LED_SIG3,
 		.active_low	= 1,
 	},
 	{
-		.name		= "wpj563:green:sig4",
+		.name		= "wpj344:green:sig4",
 		.gpio		= WPJ563_GPIO_LED_SIG4,
 		.active_low	= 1,
 	},
 	{
-		.name		= "wpj563:buzzer",
+		.name		= "wpj344:buzzer",
 		.gpio		= WPJ563_GPIO_BUZZER,
 		.active_low	= 0,
 	}
@@ -111,10 +112,13 @@ static struct mdio_board_info WPJ563_mdi
 	},
 };
 
+extern u8 *ath10k_macaddr;
+
 static void __init WPJ563_setup(void)
 {
+        struct ath9k_platform_data *pdata;
 	u8 *art = (u8 *) KSEG1ADDR(0x1fff0000);
-	u8 *mac = (u8 *) KSEG1ADDR(0x1f02e000);
+	u8 mac[ETH_ALEN];
 
 	ath79_register_m25p80(NULL);
 
@@ -126,16 +130,24 @@ static void __init WPJ563_setup(void)
 
 	ath79_register_usb();
 	
-	ath79_register_wmac(art + WPJ563_WMAC_CALDATA_OFFSET, NULL);
-	
-	ath79_register_pci();
+	/* Reserve one for LAN */
+        ath79_init_mac(mac, (u8 *) KSEG1ADDR(0x1f02e010), 3);
+        ath79_register_wmac(art + WPJ563_WMAC_CALDATA_OFFSET, mac);
+        ath79_init_mac(mac, (u8 *) KSEG1ADDR(0x1f02e010), 2);
+	ath10k_macaddr = kmalloc(ETH_ALEN, GFP_KERNEL);
+	memcpy(ath10k_macaddr, mac, ETH_ALEN);
+	ap91_pci_init(NULL, mac);
+        pdata = ap9x_pci_get_wmac_data(0);
+        if (pdata) {
+        	pdata->use_eeprom = true;
+	}
 
 	mdiobus_register_board_info(WPJ563_mdio0_info,
 				    ARRAY_SIZE(WPJ563_mdio0_info));
 	ath79_register_mdio(0, 0x0);
 
-	ath79_init_mac(ath79_eth0_data.mac_addr, mac + WPJ563_MAC0_OFFSET, 0);
-	ath79_init_mac(ath79_eth1_data.mac_addr, mac + WPJ563_MAC1_OFFSET, 0);
+	ath79_init_mac(ath79_eth0_data.mac_addr, (u8 *) KSEG1ADDR(0x1f02e010), 0);
+        ath79_init_mac(ath79_eth1_data.mac_addr, (u8 *) KSEG1ADDR(0x1f02e010), 1);
 
 	/* GMAC0 is connected to an QCA8334 switch */
 	ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_SGMII;
Index: build_dir/target/linux/ar71xx/files/arch/mips/ath79/dev-eth.c
===================================================================
--- build_dir.orig/target/linux/ar71xx/files/arch/mips/ath79/dev-eth.c
+++ build_dir/target/linux/ar71xx/files/arch/mips/ath79/dev-eth.c
@@ -1079,6 +1079,8 @@ void __init ath79_register_eth(unsigned
 
 		pdata->has_gbit = 1;
 		pdata->is_ar724x = 1;
+		pdata->max_frame_len = SZ_16K - 1;
+		pdata->desc_pktlen_mask = SZ_16K - 1;
 		break;
 
 	default:
